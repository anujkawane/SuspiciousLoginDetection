# Suspicious Login Detection Pipeline

### Prerequisites

Required packages are included in [requirements.txt](https://github.com/anujkawane/SuspiciousLoginDetection/blob/main/requirements.txt) file

1. confluent_kafka==1.8.2
2. pyspark==3.2.1
3. pandas==1.4.2
4. PyArrow==8.0.0

# Data

The data will be generated by a data generation script at `SuspiciousLoginDetection/DataGeneration/ServerLogGenerator.py`.

# Setup and run

#### For setting up kafka download the file from below url

```bash
https://drive.google.com/file/d/1iVnK2hKXyOK20IumYqTWZPbjnbrM05-X/view?usp=sharing
```

# Suspicious Login Detection Pipeline

## Requirements ðŸ”§
* Python 3.9
* Spark 3.2.1

## Running The Application ðŸ”Œ


### Kafka Setup
       
* Download the Kafka setup from below link
```bash
https://drive.google.com/file/d/1iVnK2hKXyOK20IumYqTWZPbjnbrM05-X/view?usp=sharing
```
        
* Run the below commands in the project directory.

```bash
tar -xzf kafka_2.12-3.1.1.tgz
cd kafka_2.12-3.1.1
bin/zookeeper-server-start.sh config/zookeeper.properties
```
        
* Change your directory to kafka_2.12-3.1.1 and run below command
```bash
bin/kafka-server-start.sh config/server.properties
```
        
        
* To create topics needed for this project using below command (new terminal)

```bash
 kafka-topics --create --partitions 1 --replication-factor 1 --topic server-logs --bootstrap-server localhost:9092
 kafka-topics --create --partitions 1 --replication-factor 1 --topic alerts --bootstrap-server localhost:9092
```
   
        
 ### Clone project
    
    
 * Download the project or clone project using below command 

       git clone https://github.com/anujkawane/SuspiciousLoginDetection.git
       
* Download data file from bewlo link and paste it to the _*SuspiciousLoginDetection/DataFiles/*_ folder (Github doesnt allow larger files)

```bash
Link goes here
```
        
     
### Starting Pipeline

* Create new execution environment (if needed) 

```bash
cd SuspiciousLoginDetection (if downloaded from github: cd SuspiciousLoginDetection-main)
pip install -r requirements.txt 
```

* Go inside the _*/DataGeneration*_ and run _*ServerLogGenerator.py*_ using below commands:
```bash
cd DataGeneration
 
python3 ServerLogGenerator.py
```

* Go inside the _*/SuspiciousLoginDetection*_ and run _*ProcessAlerts.py.py*_ using below commands:
```bash
cd SuspiciousLoginDetection
 
python3 ProcessAlerts.py
```

* Also run run _*SuspiciousLoginDetection.py*_ in the same folder using below commands:
```bash
python3 SuspiciousLoginDetection.py
```

* Go inside the _*/DataGeneration*_ and run _*ServerLogGenerator.py*_ using below commands:
```bash
python3 ServerLogGenerator.py
```



